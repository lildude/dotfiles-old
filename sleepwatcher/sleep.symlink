#!/bin/sh
#
# This script uses SleepWatcher to run commands when my laptop goes to sleep.
# The corresponding ${HOME}/.wakeup script executes commands when the laptop wakes up.
#
# Requires: `brew install sleepwatcher && ln -sfv /usr/local/Cellar/sleepwatcher/2.2/de.bernhard-baehr.sleepwatcher-20compatibility-localuser.plist ~/Library/LaunchAgents/ && launchctl load ~/Library/LaunchAgents/de.bernhard-baehr.sleepwatcher-20compatibility-localuser.plist`
#
# Kill Garmin Express and it's service process
killall "Garmin Express" 2>&1 > /dev/null
killall "Garmin Express Service" 2>&1 /dev/null

# Eject ipod nano if mounted
diskutil list IPOD 2>&1 > /dev/null && \
osascript -e 'tell application "Finder" to eject "IPOD"'

# Eject Garmin ForeRunner if mounted
diskutil list GARMIN 2>&1 > /dev/null && \
osascript -e 'tell application "Finder" to eject "GARMIN"' && \
osascript -e 'tell application "Finder" to delay 30'
