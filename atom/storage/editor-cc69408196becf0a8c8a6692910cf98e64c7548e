{"mode":"editor","version":1,"windowDimensions":{"x":573,"y":23,"width":1434,"height":1016,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"paths":["/Users/lildude/github/github"],"buffers":[{"text":"#!/usr/bin/env safe-ruby\n#\n#/ Usage: ghe-user-promote <username> [options]\n#/\n#/ This utility promotes the given user to a site admin.\n#/\n#/ OPTIONS:\n#/   -h, --help         Show this message\n\nif ARGV.empty? || ARGV.include?(\"--help\") || ARGV.include?(\"-h\")\n  exec \"grep ^#/<'#{__FILE__}'|cut -c4-\"\nend\n\nrequire_relative \"../config/environment\"\n\nif GitHub.auth_mode.to_s == \"ldap\" && GitHub.ldap_admin_group.present?\n  abort \"Promote users by adding them to your LDAP admin group: #{GitHub.ldap_admin_group}\"\nelsif GitHub.auth_mode.to_s == \"saml\"\n  unless GitHub.saml_disable_admin_demote\n    abort \"Promote users by using your SAML identity provider or disable SAML-based administrator demotion/promotion within the management console to use this command.\"\n  end\nend\n\nusername = ARGV.first\n\nunless user = User.find_by_login(username)\n  abort \"User not found: #{username}\"\nend\n\nif user.suspended?\n  abort \"User #{username} is suspended. Use ghe-user-unsuspend to unsuspend them first.\"\nend\n\nif user.site_admin?\n  abort \"User #{username} is already a site admin.\"\nend\n\nuser.grant_site_admin_access \"promoted via ghe-user-promote\"\n\nputs \"User #{username} promoted to site admin. Use ghe-user-demote to reverse this action.\"\n","markerStore":{"nextMarkerId":26,"markersById":{"0":{"range":{"start":{"row":19,"column":3},"end":{"row":19,"column":3}},"properties":{"type":"selection","editorId":82,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":215,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/lildude/github/github/script/ghe-user-promote","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"e5bb5b7f9919e116faf11b7c655c869057429358","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"#!/usr/bin/env safe-ruby\n#\n#/ Usage: ghe-user-demote <username> [options]\n#/\n#/ This utility demotes the given user from site admin.\n#/\n#/ OPTIONS:\n#/   -h, --help         Show this message\n\nif ARGV.empty? || ARGV.include?(\"--help\") || ARGV.include?(\"-h\")\n  exec \"grep ^#/<'#{__FILE__}'|cut -c4-\"\nend\n\nrequire_relative \"../config/environment\"\n\nif GitHub.auth_mode.to_s == \"ldap\" && GitHub.ldap_admin_group.present?\n  abort \"Demote users by removing them from your LDAP admin group: #{GitHub.ldap_admin_group}\"\nelsif GitHub.auth_mode.to_s == \"saml\"\n  unless GitHub.saml_disable_admin_demote\n    abort \"Demote users by using your SAML identity provider or disable SAML-based administrator demotion/promotion within the management console to use this command.\"\n  end\nend\n\nusername = ARGV.first\n\nunless user = User.find_by_login(username)\n  abort \"User not found: #{username}\"\nend\n\nunless user.site_admin?\n  abort \"User #{username} is not a site admin.\"\nend\n\nuser.revoke_privileged_access \"demoted via ghe-user-demote\"\n\nputs \"User #{username} demoted from site admin. Use ghe-user-promote to reverse this action.\"\n","markerStore":{"nextMarkerId":18,"markersById":{"0":{"range":{"start":{"row":19,"column":3},"end":{"row":19,"column":3}},"properties":{"type":"selection","editorId":86,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":129,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/lildude/github/github/script/ghe-user-demote","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"e1b228fae2d2f6db3df8123f8d725e1eeeb70101","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<%# view is an instance of Site::GlobalNotice %>\n\n<% if !view.active.nil? %>\n<div class=\"flash flash-full js-notice flash-<%= view.type %>\">\n<div class=\"container\">\n  <% if view.active == :check_verified_emails %>\n    <% if current_user.must_verify_email? %>\n      <%= link_to settings_user_emails_url(:host => GitHub.host_name), :class => \"flash-action btn btn-sm compact\" do %>\n        Configure email settings\n        <span class=\"octicon octicon-arrow-right\"></span>\n      <% end %>\n      <h4 class=\"flash-content\">\n        Please verify your email address to access all of GitHub's features.\n      </h4>\n      An email containing verification instructions was sent to <%= current_user.primary_user_email.email %>.\n    <% else %>\n      <h4 class=\"flash-content\">\n        You don’t have any verified emails.  We recommend <%= link_to(\"verifying\", settings_user_emails_url(:host => GitHub.host_name)) %> at least one email.\n      </h4>\n      Email verification helps our support team verify ownership if you lose account access\n        and allows you to receive all the notifications you ask for.\n    <% end %>\n  <% end %>\n\n  <% if view.active == :check_billing_email %>\n    <h4 class=\"flash-content\">\n      Your billing email is invalid. Please update it in your <%= link_to(\"settings\", settings_user_emails_url(:host => GitHub.host_name)) %>.\n    </h4>\n    We send receipts and billing notifications to your billing email so it’s important that it works.\n  <% end %>\n\n  <% if view.active == :check_personal_billing_trouble %>\n    <h4 class=\"flash-content\">\n      We are having a problem billing your account. Please <%= link_to(\"enter a new payment method\", billing_url(:host => GitHub.host_name)) %>\n      or check with your payment provider for details on why the transaction failed.\n      If you don’t need access to your private repositories, you can <%= link_to(\"downgrade to the Free plan\", plans_url(:host => GitHub.host_name)) %>.\n    </h4>\n    <% if !current_user.billed_on.nil? %>\n      We’ll try billing your account again on <%= current_user.next_billing_date.to_s(:long) %>.\n    <% end %>\n    You can always <a href=\"<%= contact_path %>\">contact support</a> with any questions.\n  <% end %>\n\n  <% if view.active == :check_org_billing_trouble %>\n    <h4 class=\"flash-content\">\n      We are having a problem billing the <%= view.troubled_org.name %> organization.\n      Please <%= link_to(\"update your payment method\", settings_org_billing_url(view.troubled_org, :host => GitHub.host_name)) %>\n      or call your payment provider for details on why the transaction failed.\n      If you don’t need access to your private repositories, you can <%= link_to(\"downgrade to the Free plan\", org_plans_url(view.troubled_org, :host => GitHub.host_name)) %>.\n    </h4>\n    <% if !view.troubled_org.billed_on.nil? %>\n      We’ll try billing <%= view.troubled_org.name %> again on <%= view.troubled_org.next_billing_date.to_s(:long) %>.\n    <% end %>\n    You can always <a href=\"<%= contact_path %>\">contact support</a> with any questions.\n  <% end %>\n\n  <% if view.active == :check_disabled_personal_repos %>\n    <h4 class=\"flash-content\">\n      You are over your private repository plan limit (<%= view.repo_count %>). Please\n      <a href=\"<%= billing_url(:host_name => GitHub.host_name) %>\">upgrade your plan</a>, make private repositories\n      public, or remove private repositories so that you are within your plan limit.\n    </h4>\n    Your private repositories have been locked until this is resolved.\n    Thanks for understanding. You can <a href=\"<%= contact_path %>\">contact support</a> with any questions.\n  <% end %>\n\n  <% if view.active == :check_disabled_org_repos %>\n    <h4 class=\"flash-content\">\n      The organization <%= view.troubled_org.name %> is over its private repository plan limit\n      (<%= view.repo_count %>). Please\n      <%= link_to('upgrade your plan', settings_org_billing_url(view.troubled_org, :host => GitHub.host_name)) %>,\n      make private repositories public, or remove private repositories so that\n      <%= view.troubled_org.name %> is within its plan limit.\n    </h4>\n    The private repositories under the <em><%= view.troubled_org.name %></em>\n    account have been locked until this is resolved. Thanks for understanding.\n    You can <a href=\"<%= contact_path %>\">contact support</a> with any questions.\n  <% end %>\n\n  <% if view.active == :check_disabled_personal_billing %>\n    <% if current_user.invoiced? %>\n      <h4 class=\"flash-content\">\n        We have not received payment for your most recent invoice.\n      </h4>\n    <% else %>\n      <h4 class=\"flash-content\">\n        We are having a problem billing your account. Please <a href=\"<%= billing_url(:host => GitHub.host_name) %>\">update your payment method</a>\n        or call your payment provider for details on why the transaction failed.\n      </h4>\n    <% end %>\n    Your private repositories have been locked until you fix this error. Thanks for understanding. You can <a href=\"<%= contact_path %>\">contact support</a> with any questions.\n  <% end %>\n\n  <% if view.active == :check_disabled_org_billing %>\n    <% if view.troubled_org.invoiced? %>\n      <h4 class=\"flash-content\">\n        We have not received payment for the most recent invoice for <%= view.troubled_org.name %>.\n        Please <a href=\"<%= contact_path %>\">contact support</a> to resolve.\n      </h4>\n    <% else %>\n      <h4 class=\"flash-content\">\n        We are having a problem billing the <%= view.troubled_org.name %> organization.\n        Please <%= link_to('update your payment information', settings_org_billing_url(view.troubled_org, :host => GitHub.host_name)) %>\n        or call your payment provider for details on why the transaction failed.\n        You can <a href=\"<%= contact_path %>\">contact support</a> with any questions.\n      </h4>\n    <% end %>\n    The private repositories under the <em><%= view.troubled_org.name %></em> account have been locked until you fix this error. Thanks for understanding.\n  <% end %>\n\n  <% if view.active == :check_billingless_org %>\n    <h4 class=\"flash-content\">\n      Please <%= link_to(\"enter a billing email\", settings_org_profile_url(view.troubled_org, :host => GitHub.host_name)) %>\n      for your <em><%= view.troubled_org.name %></em> organization.\n    </h4>\n    We need this address to send you receipts and contact you if there’s a problem. Thanks.\n  <% end %>\n\n  <% if view.active == :check_spammy %>\n    <h4 class=\"flash-content\">One of our mostly harmless robots seems to think you are not a human.</h4>\n    Because of that, it’s hidden your profile from the public. If you really are human, please <a href=\"<%= contact_path %>\">contact support</a> to have your profile reinstated. We promise we won’t require DNA proof of your humanity.\n  <% end %>\n\n  <% if view.active == :check_two_factor_recovery_codes %>\n    <h4 class=\"flash-content\">You could lose access to your GitHub account</h4>\n    You enabled two-factor authentication, but you haven’t viewed your recovery codes.\n    If you lose your two-factor device, GitHub support will not be able to recover your account for you. Go to the\n    <%= link_to 'two-factor authentication settings page', settings_user_two_factor_authentication_configuration_url(:host => GitHub.host_name) %>\n    to view and print your <a href=\"<%= GitHub.help_url %>/articles/downloading-your-two-factor-authentication-recovery-codes\">recovery codes</a>.\n  <% end %>\n\n  <% if view.active == :check_staff_has_2fa %>\n    <h4 class=\"flash-content\">You do not have two-factor authentication enabled.</h4>\n    <%= link_to 'Enable two-factor authentication', settings_user_two_factor_authentication_intro_url(:host => GitHub.host_name) %>\n    if you would like access to staff-only features.\n  <% end %>\n\n  <% if view.active == :check_license_expiration %>\n    <a href=\"https://enterprise.github.com/purchase\" class=\"flash-action btn btn-sm btn-primary\">\n      <% if view.license.evaluation? %>\n        Upgrade to full license\n      <% else %>\n        Renew license\n      <% end %>\n    </a>\n    <span class=\"mega-octicon octicon-alert ghe-license-expiry-icon left\" aria-hidden=\"true\"></span>\n    <h4 class=\"flash-content\"><%= pluralize(view.license.days_until_expiration, 'day') %> remaining.</h4>\n    <a href=\"https://enterprise.github.com/purchase\">\n      <% if view.license.evaluation? %>\n        Upgrade to a full license\n      <% else %>\n        Renew your license\n      <% end %>\n    </a>\n    or contact <a href=\"mailto:sales@github.com\">sales@github.com</a> to avoid service interruption.\n  <% end %>\n\n  <% if view.active == :check_license_seat_limit %>\n    <%= form_tag stafftools_dismiss_license_notice_url(:type => :seat_limit, :host => GitHub.host_name), :class => \"flash-close js-notice-dismiss\", \"data-remote\" => true do %>\n      <button type=\"submit\" class=\"close-button\" aria-label=\"Hide this notice\">\n        <span class=\"octicon octicon-x\"></span>\n      </button>\n    <% end %>\n    <h4 class=\"flash-content\">\n      <% if view.license.seats_available.zero? %>\n        You have no seats available.\n      <% else %>\n        You have only <%= pluralize(view.license.seats_available, 'more seat') %> available.\n      <% end %>\n    </h4>\n    <a href=\"https://enterprise.github.com/purchase\">Purchase more seats</a> to add additional people.\n  <% end %>\n\n  <% if view.active == :check_maintenance %>\n    <h4 class=\"flash-content\">\n      Maintenance is scheduled on <%= view.maintenance_scheduled %>\n    </h4>\n    <p>\n      Access to GitHub Enterprise and all git repositories will be unavailable.\n    </p>\n  <% end %>\n\n  <% if view.active == :check_emails %>\n    <h4 class=\"flash-content\">\n      You don’t have an email address.  We recommend <%= link_to(\"adding\", settings_user_emails_url(:host => GitHub.host_name)) %> at least one email.\n    </h4>\n    An email address lets you receive notifications via email, reset your password, and more.\n    <% if user_sync_emails? %>\n      Your email addresses are managed in LDAP. Contact your administrator to add an email address.\n    <% end %>\n  <% end %>\n\n  <% if view.active == :check_announcement %>\n    <%= view.announcement.html_safe %>\n  <% end %>\n\n</div>\n</div>\n<% end %>\n","markerStore":{"nextMarkerId":5,"markersById":{"0":{"range":{"start":{"row":193,"column":35},"end":{"row":193,"column":35}},"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":18,"undoStack":[{"type":"group-start","snapshot":{"0":{"range":[[193,25],[193,25]],"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[193,25],[193,25]],"newRange":[[193,25],[193,26]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[193,26],[193,26]],"newRange":[[193,26],[193,27]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[193,27],[193,27]],"newRange":[[193,27],[193,28]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[193,28],[193,28]],"newRange":[[193,28],[193,29]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[193,29],[193,29]],"newRange":[[193,29],[193,30]],"oldText":"","newText":"l"}},{"type":"group-end","snapshot":{"0":{"range":[[193,30],[193,30]],"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[193,30],[193,30]],"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[193,30],[193,30]],"newRange":[[193,30],[193,31]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[193,31],[193,31]],"newRange":[[193,31],[193,32]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[193,32],[193,32]],"newRange":[[193,32],[193,33]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[193,33],[193,33]],"newRange":[[193,33],[193,34]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[193,34],[193,34]],"newRange":[[193,34],[193,35]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[193,35],[193,35]],"newRange":[[193,35],[193,36]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"0":{"range":[[193,36],[193,36]],"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[193,36],[193,36]],"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[193,35],[193,36]],"newRange":[[193,35],[193,35]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[193,34],[193,35]],"newRange":[[193,34],[193,34]],"oldText":"g","newText":""}},{"type":"change","content":{"oldRange":[[193,34],[193,34]],"newRange":[[193,34],[193,35]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"0":{"range":[[193,35],[193,35]],"properties":{"type":"selection","editorId":100,"goalScreenRange":null},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/lildude/github/github/app/views/site/_global_notices.html.erb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"9a956b68adf8b917d505591f2fc0a4d3898d0de1","preferredLineEnding":null,"deserializer":"TextBuffer","version":2}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":82,"softTabs":true,"displayBuffer":{"id":83,"softWrapped":true,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/lildude/github/github/script/ghe-user-promote","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":100,"softTabs":true,"displayBuffer":{"id":101,"softWrapped":true,"scrollTop":3727,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/lildude/github/github/app/views/site/_global_notices.html.erb","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":86,"softTabs":true,"displayBuffer":{"id":87,"softWrapped":true,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/lildude/github/github/script/ghe-user-demote","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/lildude/github/github/app/views/site/_global_notices.html.erb","focused":false,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-ruby","language-hyperlink","language-todo"],"deserializer":"Workspace"},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"packageStates":{"metrics":{"sessionLength":71300310},"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false,"wholeWord":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":["stafftoo","all_users","csv?","def csv","all_user","send_report_data","def send_report_data"],"replaceHistory":[],"pathsHistory":[]},"fuzzy-finder":{"/Users/lildude/github/github/script/ghe-user-promote":1444066792344,"/Users/lildude/github/github/app/views/site/_global_notices.html.erb":1444066811557,"/Users/lildude/github/github/script/ghe-user-demote":1438781446808},"keybinding-resolver":{},"tree-view":{"directoryExpansionStates":{"/Users/lildude/github/github":{"isExpanded":true,"entries":{"app":{"isExpanded":true,"entries":{"api":{"isExpanded":false,"entries":{}},"assets":{"isExpanded":false,"entries":{}},"controllers":{"isExpanded":false,"entries":{}},"helpers":{"isExpanded":false,"entries":{}},"mailers":{"isExpanded":false,"entries":{}},"models":{"isExpanded":false,"entries":{}},"validators":{"isExpanded":false,"entries":{}},"view_models":{"isExpanded":false,"entries":{}},"views":{"isExpanded":false,"entries":{}}}},"config":{"isExpanded":false,"entries":{}},"db":{"isExpanded":false,"entries":{}},"docs":{"isExpanded":false,"entries":{}},"enterprise":{"isExpanded":false,"entries":{}},"git-bin":{"isExpanded":false,"entries":{}},"jobs":{"isExpanded":false,"entries":{}},"lib":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"script":{"isExpanded":false,"entries":{}},"test":{"isExpanded":false,"entries":{}},"vendor":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/lildude/github/github/test","hasFocus":true,"attached":true,"scrollLeft":0,"scrollTop":56,"width":342},"tabs":[{}],"linter":{"scope":"File"}}}