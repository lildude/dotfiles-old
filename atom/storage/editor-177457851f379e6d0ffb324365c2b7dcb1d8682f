{"mode":"editor","version":1,"windowDimensions":{"x":348,"y":23,"width":1514,"height":829,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"paths":["/Users/lildude/Sites/phpSmug"],"buffers":[{"text":"<?php \n/**\n * Copyright (c) 2008 Colin Seymour\n *\n * This file is part of phpSmug.\n *\n * phpSmug is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * phpSmug is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with phpSmug.  If not, see <http://www.gnu.org/licenses/>.\n */\nif (session_id() == \"\") { @session_start(); }\n?>\n<html>\n<head>\n\t<title>phpSmug OAuth Login Example</title>\n\t<style type=\"text/css\">\n\t\tbody { background-color: #fff; color: #444; }\n\t\tdiv { width: 600px; margin: 0 auto; text-align: center; }\n\t\timg { border: 0;}\n\t</style>\n</head>\n<body>\n\t<div>\n\t\t<a href=\"http://phpsmug.com\"><img src=\"phpSmug-logo.png\" /></a>\n\t\t<h2>phpSmug External Links Example</h2>\n<?php\n/* Last updated with phpSmug 3.5\n *\n * This example file shows you how authenticate using OAuth and then display\n * images within the first gallery found.  This example is the same as that in\n * example-oauth.php, with the exception that it signs the image URLs with your\n * OAuth credentials using \"$f->signResource()\". See line 91.\n *\n * This is how you can display images from galleries that have the \n * \"External links\" gallery setting set to \"No\".\n *\n * You'll want to replace:\n * - <API KEY> with one provided by SmugMug: http://www.smugmug.com/hack/apikeys \n * - <APP NAME/VER (URL)> with your application name, version and URL\n * - <OAUTH SECRET> with the OAuth Secret associated with your API Key.\n *\n * The <APP NAME/VER (URL)> is NOT required, but it's encouraged as it will\n * allow SmugMug diagnose any issues users may have with your application if\n * they request help on the SmugMug forums.\n *\n */\nrequire_once( \"../phpSmug.php\" );\n\ntry {\n\t$f = new phpSmug(\"APIKey=<API KEY>\", \"AppName=<APP NAME/VER (URL)>\", \"OAuthSecret=<OAUTH SECRET>\");\n\n\t// Perform the 3 step OAuth Authorisation process.\n\t// NOTE: This is a very simplified example that does NOT store the final token. \n\t// You will need to ensure your application does.\n\tif ( ! isset( $_SESSION['SmugGalReqToken'] ) ) {\n\t\t// Step 1: Get a Request Token\n\t\t$d = $f->auth_getRequestToken();\n\t\t$_SESSION['SmugGalReqToken'] = serialize( $d );\n\n\t\t// Step 2: Get the User to login to SmugMug and Authorise this demo\n\t\techo \"<p>Click <a href='\".$f->authorize().\"' target='_blank'><strong>HERE</strong></a> to Authorize This Demo.</p>\";\n        echo \"<p>A new window/tab will open asking you to login to SmugMug (if not already logged in).  Once you've logged it, SmugMug will redirect you to a page asking you to approve the access (it's read only) to your public photos.  Approve the request and come back to this page and click REFRESH below.</p>\";\n        echo \"<p><a href='\".$_SERVER['PHP_SELF'].\"'><strong>REFRESH</strong></a></p>\";\n\t} else {\n\t\t$reqToken = unserialize( $_SESSION['SmugGalReqToken'] );\n\t\tunset( $_SESSION['SmugGalReqToken'] );\n\n\t\t// Step 3: Use the Request token obtained in step 1 to get an access token\n\t\t$f->setToken(\"id={$reqToken['Token']['id']}\", \"Secret={$reqToken['Token']['Secret']}\");\n\t\t$token = $f->auth_getAccessToken();\t// The results of this call is what your application needs to store.\n\t\t\n\t\t// Set the Access token for use by phpSmug.   \n\t\t$f->setToken( \"id={$token['Token']['id']}\", \"Secret={$token['Token']['Secret']}\" );\n\n\t\t// Get list of albums\n\t\t$albums = $f->albums_get( 'Heavy=True' );\t\n\t\t// Get list of images and other useful information from the first gallery returned\n\t\t$images = $f->images_get( \"AlbumID={$albums['0']['id']}\", \"AlbumKey={$albums['0']['Key']}\", \"Heavy=1\" );\n\t\t// Display the thumbnails and link to the Album page for each image.\n\t\t// Each image is signed with your OAuth credentials.\n\t\tforeach ( $images['Images'] as $image ) {\n\t\t\techo '<a href=\"'.$image['URL'].'\"><img src=\"'.$f->signResource( $image['TinyURL'] ).'\" title=\"'.$image['Caption'].'\" alt=\"'.$image['id'].'\" /></a>';\n\t\t}\n\t}\n}\ncatch ( Exception $e ) {\n\techo \"{$e->getMessage()} (Error Code: {$e->getCode()})\";\n}\n?>\n\t</div>\n</body>\n</html>\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":4},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/lildude/Development/phpSmug/examples/example-external-links.php","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"67d36e045a65e62a730ffd0e3e6a6a49018fdad3","preferredLineEnding":null,"deserializer":"TextBuffer","version":2}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":4,"softTabs":false,"displayBuffer":{"id":5,"softWrapped":true,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/lildude/Development/phpSmug/examples/example-external-links.php","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/lildude/Development/phpSmug/examples/example-external-links.php","focused":true,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-php","language-html","language-css","language-hyperlink","language-todo"],"deserializer":"Workspace"},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"packageStates":{"metrics":{"sessionLength":1005045},"fuzzy-finder":{"/Users/lildude/Development/phpSmug/examples/example-external-links.php":1444925088902},"keybinding-resolver":{"attached":false},"tree-view":{"directoryExpansionStates":{"/Users/lildude/Sites/phpSmug":{"isExpanded":true,"entries":{"admin":{"isExpanded":false,"entries":{}},"examples":{"isExpanded":false,"entries":{}},"lib":{"isExpanded":false,"entries":{}},"test":{"isExpanded":false,"entries":{}},"tests":{"isExpanded":false,"entries":{}},"tmplib":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/lildude/Sites/phpSmug","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200},"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":["debug"],"replaceHistory":[],"pathsHistory":[]},"linter":{"scope":"File"},"tabs":[{}]}}